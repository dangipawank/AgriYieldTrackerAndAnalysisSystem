<!doctype html>
<html>
  <head>
    <title>Add User</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="auth-container auth-container-wide">
      <h1>Add User</h1>

      {% if errors.get('global') %}
      <div class="alert alert-danger">{{ errors.get('global') }}</div>
      {% endif %}

      <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          name="username"
          value="{{ form_data.username }}"
        />
        {% if errors.get('username') %}
        <div class="field-error">{{ errors.get('username') }}</div>
        {% endif %}

        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          value="{{ form_data.email }}"
        />
        {% if errors.get('email') %}
        <div class="field-error">{{ errors.get('email') }}</div>
        {% endif %}

        <label for="role">Role</label>
        <select id="role" name="role">
          <option value="Farmer">Farmer</option>
          <option value="Officer">Officer</option>
          <option value="Admin">Admin</option>
        </select>
        {% if errors.get('role') %}
        <div class="field-error">{{ errors.get('role') }}</div>
        {% endif %}

        <label for="password">Password</label>
        <input type="password" id="password" name="password" />
        {% if errors.get('password') %}
        <div class="field-error">{{ errors.get('password') }}</div>
        {% endif %}

        <label for="confirm_password">Confirm Password</label>
        <input type="password" id="confirm_password" name="confirm_password" />
        {% if errors.get('confirm_password') %}
        <div class="field-error">{{ errors.get('confirm_password') }}</div>
        {% endif %}

        <button type="submit">Create User</button>
      </form>

      <p class="hint">
        <a href="{{ url_for('main.list_users') }}">Back to Manage Users</a>
      </p>
    </div>
    <script>
      document.getElementById("role").value = "{{ form_data.role }}";
    </script>
  </body>
</html>
